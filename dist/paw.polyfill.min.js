/*! paw.js // @version 1.0.0, @license MIT, @author dameleon <dameleon@gmail.com> */
//! Object.keys Polyfill from [MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/keys#Polyfill)
Object.keys||(Object.keys=function(){"use strict";var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],i=n.length;return function(s){if("object"!=typeof s&&("function"!=typeof s||null===s))throw new TypeError("Object.keys called on non-object");var o,r,a=[];for(o in s)t.call(s,o)&&a.push(o);if(e)for(r=0;i>r;r++)t.call(s,n[r])&&a.push(n[r]);return a}}()),function(t,e){"use strict";function n(n,i){if(n&&!n.addEventListener)throw new Error("Argument Error: First argument must be Node");var s=this.setting={};n=n||T,i||(i={});for(var o in b)s[o]=i[o]!==e?i[o]:b[o];s.view=n.defaultView||n.ownerDocument&&n.ownerDocument.defaultView||t,this.rootNode=n,this.rootNode.addEventListener(f.START,this),this.handlers={},this.timers={}}function i(t){switch(t.type){case f.MOVE:this.onMove(t);break;case f.START:this.onStart(t);break;case f.END:this.onEnd(t);break;case f.CANCEL:this.onCancel(t)}}function s(t){for(var e,i,s,o=this.setting,r=this.handlers,a=v(t),c=0,E=a.length;E>c;c++)i=a[c],s=i[m],e=new n.Touch(s,i,o),r[s]=e,this.setTimer(s);this.bindEvents()}function o(t){for(var e,n,i,s=this.handlers,o=v(t),r=0,a=o.length;a>r;r++)e=o[r],i=e[m],n=s[i],n&&n.move(e)}function r(t){for(var e,n,i,s=this.handlers,o=v(t),r=0,a=o.length;a>r;r++)e=o[r],i=e[m],n=s[i],n&&(n.end(e),delete s[i]),this.clearTimer(i);this.unbindEvents()}function a(t){for(var e,n,i,s=this.handlers,o=v(t),r=0,a=o.length;a>r;r++)e=o[r],i=e[m],n=s[i],n&&(n.cancel(e),delete s[i]),this.clearTimer(i);this.unbindEvents()}function c(t){var e=this.handlers,n=e[t];n&&(n.timeout(),delete e[t]),this.clearTimer(t)}function E(e){var n=this;this.timers[e]=t.setTimeout(function(){n.onTimeout(e)},this.setting.pressDuration)}function h(e){var n=this.timers;t.clearTimeout(n[e]),delete n[e]}function u(){if(!this.boundEvents){var t=this.rootNode;this.boundEvents=!0,t.addEventListener(f.MOVE,this),t.addEventListener(f.END,this),t.addEventListener(f.CANCEL,this)}}function l(){if(this.boundEvents&&!(n.keys(this.handlers).length>0)){var t=this.rootNode;this.boundEvents=!1,t.removeEventListener(f.MOVE,this),t.removeEventListener(f.END,this),t.removeEventListener(f.CANCEL,this)}}function d(t){var e=this.handlers;for(var i in e)delete e[i],this.clearTimer(i);this.rootNode.removeEventListener(f.START),this.unbindEvents(),t&&n.Touch.dispose()}function v(t){return p&&t.changedTouches||[t]}var T=t.document,p="ontouchstart"in T,g=!!t.PointerEvent,f={START:p&&"touchstart"||g&&"pointerdown"||"mousedown",MOVE:p&&"touchmove"||g&&"pointermove"||"mousemove",END:p&&"touchend"||g&&"pointerup"||"mouseup",CANCEL:p&&"touchcancel"||g&&"pointercancel"||"mouseleave"},b={pressDuration:500,doubleTapDuration:400,motionThreshold:5,fastClick:!0},m=p&&"identifier"||g&&"pointerId"||"button";n.IS_SUPPORT_TOUCH_EVENT=p,n.IS_SUPPORT_POINTER_EVENT=g,n.EVENT_TYPES={TAP:"tap",DOUBLE_TAP:"doubletap",PRESS:"press",CLICK:"click"},n.EVENT_INTERFACES={TOUCH_EVENT:"touchevent",POINTER_EVENT:"pointerevent",MOUSE_EVENT:"mouseevent"},n.keys=Object.keys||_&&_.keys,n.prototype={constructor:n,handleEvent:i,onStart:s,onMove:o,onEnd:r,onCancel:a,onTimeout:c,setTimer:E,clearTimer:h,bindEvents:u,unbindEvents:l,dispose:d},t.Paw=n}(this.self||global,void 0),function(t){"use strict";if(!t.Paw)throw new Error('"Paw" does not exist in global');var e,n,i=t.Paw,s=t.document,o=!0;try{new t.CustomEvent("testevent")}catch(r){o=!1}o?e=t.CustomEvent:(e=function(t,e){var n=s.createEvent("Event");return e=e||{bubbles:!0,cancelable:!0},n.initEvent(t,e.bubbles,e.cancelable),e.detail&&(n.detail=e.detail),n},e.prototype=t.Event.prototype),o=!0;try{new t.MouseEvent("testevent")}catch(r){o=!1}o?n=t.MouseEvent:(n=function(e,n){var i=s.createEvent("MouseEvent");return n=n||{bubbles:!0,cancelable:!0},i.initMouseEvent(e,n.bubbles,n.cancelable,n.view||t,n.detail,n.screenX,n.screenY,n.clientX,n.clientY,n.ctrlKey,n.altKey,n.shiftKey,n.metaKey,n.button,n.relatedTarget),i},n.prototype=t.MouseEvent.prototype),i.Event=e,i.MouseEvent=n}(this.self||global,void 0),function(t){"use strict";function e(t,e,n){this.id=t,this.setting=n,this.target=e.target,this.lastTouchInfo=e,this.startX=e.pageX,this.startY=e.pageY,this.disposeTimer=null,this.clicked=!1,n.fastClick&&n.view.addEventListener(d.CLICK,this,!0)}function n(t){this.lastTouchInfo=t}function i(t){var e,n=this.setting,i=t.pageX,s=t.pageY,o=i-this.startX,r=s-this.startY;if(f(o*o+r*r)<=n.motionThreshold){if(this.target!==t.target)if(e=this.target.compareDocumentPosition(t.target),e===p||e===g)this.target=t.target;else if(e!==T)return this.dispose();this.triggerEvent(d.TAP,t),n.fastClick&&this.triggerMouseEvent(d.CLICK,t),u(this.target,n.doubleTapDuration)&&this.triggerEvent(d.DOUBLE_TAP,t),h(this.target)}this.dispose()}function s(){var e=this;this.setting.fastClick?this.disposeTimer=t.setTimeout(function(){e.unbindClickEvent()},400):this.unbindClickEvent()}function o(){var t,e=this.lastTouchInfo,n=e.pageX,i=e.pageY,s=n-this.startX,o=i-this.startY;if(f(s*s+o*o)<=this.setting.motionThreshold){if(this.target!==e.target)if(t=this.target.compareDocumentPosition(e.target),t===p||t===g)this.target=e.target;else if(t!==T)return this.dispose();this.triggerEvent(d.PRESS,e)}this.dispose()}function r(t,e){var n={identifier:this.id,pageX:e.pageX,pageY:e.pageY,clientX:e.clientX,clientY:e.clientY,screenX:e.screenX,screenY:e.screenY},i=new l.Event(t,{bubbles:v.BUBBLES,cancelable:v.CANCELABLE,detail:n});this.target.dispatchEvent(i)}function a(t,e){var n=new l.MouseEvent(t,{bubbles:v.BUBBLES,cancelable:v.CANCELABLE,button:1,detail:1,pageX:e.pageX,pageY:e.pageY,clientX:e.clientX,clientY:e.clientY,screenX:e.screenX,screenY:e.screenY});this.target.dispatchEvent(n)}function c(e){return this.target===e.target?this.clicked?(e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation(),t.clearTimeout(this.disposeTimer),this.unbindClickEvent(),!1):void(this.clicked=!0):void 0}function E(){this.setting.view.removeEventListener(d.CLICK,this)}function h(t){var e=b;e.target=t,e.updatedTime=Date.now()}function u(t,e){var n=b;return n.target===t&&e>=Date.now()-n.updatedTime?!0:!1}if(!t.Paw)throw new Error('"Paw" does not exist in global');var l=t.Paw,d=l.EVENT_TYPES,v={BUBBLES:!0,CANCELABLE:!0,DETAIL_EVENT_INTERFACE:l.IS_SUPPORT_TOUCH_EVENT&&l.EVENT_INTERFACES.TOUCH_EVENT||l.IS_SUPPORT_POINTER_EVENT&&l.EVENT_INTERFACES.POINTER_EVENT||l.EVENT_INTERFACES.MOUSE_EVENT},T=0,p=t.Node.DOCUMENT_POSITION_PRECEDING|t.Node.DOCUMENT_POSITION_CONTAINS,g=t.Node.DOCUMENT_POSITION_FOLLOWING|t.Node.DOCUMENT_POSITION_CONTAINED_BY,f=t.Math.sqrt,b={target:null,updatedTime:null};e.dispose=function(){var t=b;t.target=t.updatedTime=null},e.prototype={constructor:e,cancel:s,dispose:s,end:i,handleEvent:c,move:n,timeout:o,triggerEvent:r,triggerMouseEvent:a,unbindClickEvent:E},l.Touch=e}(this.self||global,void 0);